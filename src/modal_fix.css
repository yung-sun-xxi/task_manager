/* src/modal_fix.css */

/* ===== Modal hardening v3: define theme tokens + force opaque modals/popovers ===== */

/* 1) Global design tokens (using the new palette) */
:root{
  --bg: var(--color-bg-app);
  --surface: var(--color-modal-bg);
  --text: var(--color-modal-text);
  --muted: var(--color-text-muted);
  --border: var(--color-modal-input-border);
  --accent: var(--color-modal-input-focus-border);

  /* Modal specifics */
  --tm-modal-overlay: rgba(2, 6, 23, 0.45);
  --tm-modal-bg: var(--color-modal-bg);
  --tm-modal-text: var(--color-modal-text);
  --tm-modal-radius: 16px;
  --tm-modal-shadow: 0 24px 56px rgba(2, 6, 23, 0.22), 0 8px 20px rgba(2, 6, 23, 0.12);
  --tm-modal-border: 1px solid var(--color-modal-input-border);
}

/* 2) Backdrop/overlay */
.tm-modal-backdrop,
[data-tm-overlay],
div[class*="modal-backdrop"],
div[class*="dialog-backdrop"],
.ReactModal__Overlay,
.mantine-Overlay-root,
.chakra-modal__overlay,
.MuiBackdrop-root{
  position: fixed !important;
  inset: 0 !important;
  background: var(--tm-modal-overlay) !important;
  opacity: 1 !important;
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
  z-index: 9998 !important;
}

/* Native <dialog> backdrop */
dialog::backdrop{
  background: var(--tm-modal-overlay) !important;
  opacity: 1 !important;
  -webkit-backdrop-filter: blur(2px);
  backdrop-filter: blur(2px);
}

/* 3) Ensure modal containers render fully and above app */
.tm-modal,
.tm-dialog,
div[role="dialog"],
[aria-modal="true"],
dialog[open],
.ReactModal__Content,
.mantine-Modal-root,
.chakra-modal__content-container,
.MuiDialog-root{
  z-index: 9999 !important;
  opacity: 1 !important;
}

/* 4) The actual dialog/paper/popover cards â€” SOLID background */
.tm-modal .tm-card,
.tm-dialog .tm-card,
.tm-modal .modal-card,
.tm-dialog .modal-card,
div[role="dialog"],
[aria-modal="true"],
dialog,
.ReactModal__Content,
.mantine-Modal-content,
.chakra-modal__content,
.MuiDialog-paper,
.fc .fc-popover{
  background: var(--tm-modal-bg) !important;
  color: var(--tm-modal-text) !important;
  border-radius: var(--tm-modal-radius) !important;
  box-shadow: var(--tm-modal-shadow) !important;
  border: var(--tm-modal-border) !important;
  opacity: 1 !important;
  -webkit-backdrop-filter: none !important;
  backdrop-filter: none !important;
}

/* FullCalendar popover internals */
.fc .fc-popover .fc-popover-header{
  background: var(--tm-modal-bg) !important;
  border-bottom: 1px solid var(--border) !important;
  color: var(--text) !important;
}
.fc .fc-popover .fc-popover-body{
  background: var(--tm-modal-bg) !important;
  color: var(--text) !important;
}

/* Inputs/selects inside dialogs should be solid */
.tm-modal input, .tm-modal select, .tm-modal textarea,
div[role="dialog"] input, div[role="dialog"] select, div[role="dialog"] textarea,
[aria-modal="true"] input, [aria-modal="true"] select, [aria-modal="true"] textarea,
dialog input, dialog select, dialog textarea{
  background: var(--color-modal-input-bg) !important;
  color: var(--tm-modal-text) !important;
  border: 1px solid var(--border) !important;
  border-radius: 10px !important;
}

/* Kill inherited transparent inline backgrounds inside dialogs */
div[role="dialog"] [style*="background: rgba"],
[aria-modal="true"] [style*="background: rgba"],
dialog [style*="background: rgba"]{
  background: var(--tm-modal-bg) !important;
}